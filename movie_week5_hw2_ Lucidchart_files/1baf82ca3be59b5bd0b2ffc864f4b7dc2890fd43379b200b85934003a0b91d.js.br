function l_nrl(a,b,c){a.rGg.set(b,c)}function l_orl(a,b,c){a.KDh.set(b,c)}function l_prl(a,b){const c=b.Vva;b=b.item;l_pg(a.rfh,c,[]).push(b);a.fwf.dispatchEvent(new l_43f(c))}function l_qrl(a,b){return new l_Ee(a,c=>{const d=b.Gi.get(c);return{pipe:new l_v(d||null,()=>[new l_(d?l_B.Kd(d.Aa.value):new l_B([]),l_WFg,l_OFg,l_PFg,l_QFg)],l_8i(l_.ib)),Nk:!0}})}
function l_rrl(a,b){var c;null==(c=a.Bb.value.get(l_nY(b)))||c.setContent(l_mY.Di,l_mY.H0e);c=a.PJ.value.filter(e=>e!=b);a.PJ.Oa(c);let d;c=null==(d=l_szi(a,b))?void 0:d.type;a.uMa.IU(b);c&&l_fzi(a.sxc,"deleted",c)}var l_srl={color:"color",shape:"shape",icon:"icon"},l_trl=l_t('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        <rect x="2" y="2" width="20" height="20" fill="url(#AdvancedColorPicker24Icon-icon-id-pattern0)"/>\n        <defs>\n            <pattern id="AdvancedColorPicker24Icon-icon-id-pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">\n                <use xlink:href="#AdvancedColorPicker24Icon-icon-id-image0" transform="scale(0.0227273)"/>\n            </pattern>\n            <image id="AdvancedColorPicker24Icon-icon-id-image0" width="44" height="44" xlink:href="data:image/png;base64,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"/>\n        </defs>\n    </svg>');var l_url=class extends l_lu{constructor(a,b){super();this.properties=a;this.Od=b;for(const c of a)l_ku(this,c)}Dd(){const a=[];var b;const c=null==(b=this.Od.i2.value)?void 0:b.id;b=new Map;if(!c)return[];for(var d of this.properties){const e=d.P2();for(const f in e){if(e[f].color.HC())continue;const g=e[f].xgb.get(c);if(g){let h;const k=null!=(h=b.get(c))?h:{};b.has(c)||b.set(c,k);f in k?k[f].count+=g:k[f]={count:g,color:e[f].color,xgb:new Map}}}}for(const [e,f]of b.entries())d=f,e===c&&a.push(...l_Aud(d));
return a}eg(){return!1}};var l_vrl=class{constructor(){this.ba={pOd:i18n.get("legend-item-control-colors-tab-label"),opk:i18n.get("legend-item-control-shapes-tab-label")};this.sKi={type:"color",icon:l_trl,label:this.ba.pOd};this.spk={type:"shape",icon:l_9p,label:this.ba.opk};this.tabs=[this.sKi,this.spk]}};l_vrl=__decorate([l_s(),__metadata("design:paramtypes",[])],l_vrl);var l_wrl=class{constructor(a){this.vb=a}rZa(){l_lD(this.vb,"StampStickyNote")}};l_wrl=__decorate([l_s(),__metadata("design:paramtypes",[l_nD])],l_wrl);var l_xrl=class{constructor(a){this.Uf=a;this.ba={description:i18n.get("legend-item-control-shapes-tab-zero-state-description")};this.imageUrl=l_Gj+"/app/chart/dialogs/legend-block/zero-state.svg";this.imageWidth=84;this.imageHeight=44;this.Uf.Gj(245)}};l_xrl.qa=function(a){return new (a||l_xrl)(l_L(l_2m))};
l_xrl.Ja=l_G({type:l_xrl,Ca:[["lucid-legend-shapes-tab-zero-state"]],Ia:4,Ha:4,Ma:[[1,"zero-state-content"],[1,"empty-selection",3,"imgUrl","imgWidth","imgHeight"],[1,"description"]],template:function(a,b){a&1&&(l_Q(0,"div",0)(1,"lucid-empty-state",1)(2,"div",2),l_W(3),l_R()()());a&2&&(l_M(1),l_P("imgUrl",b.imageUrl)("imgWidth",b.imageWidth)("imgHeight",b.imageHeight),l_M(2),l_X(b.ba.description))},La:[l_OG],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}[_nghost-%COMP%]   .zero-state-content[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;border:1px dashed var(--lucid-design-token-foreground-accent-color-css-var,#ced4db);border-radius:8px;margin:16px}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{padding-top:8px;color:var(--lucid-design-token-primary-foreground-color-css-var,#282c33);font-size:14px;line-height:20px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal}"],
changeDetection:0});var l_yrl=class extends l_g{constructor(a,b){super();this.WP=b;this.djf=new Map;this.Ga=new l_po(this);this.Ga.listen(a,l_0K,()=>{this.djf.clear()});this.WP.listen(l_3yi,c=>{this.djf.set(c.QGj,new Set(c.g9j))})}};l_yrl=__decorate([l_s(),__metadata("design:paramtypes",[l__K,l_7yi])],l_yrl);var l_zrl=class extends l_g{constructor(a,b){super();this.Ra=b;this.$Hg="shape";this.XU=a.gJ(l_pY.className,{lastUsedTab:{defaultValue:this.$Hg}})}};l_zrl=__decorate([l_s(),__metadata("design:paramtypes",[l_Eu,l_Sq])],l_zrl);var l_Arl=class extends l_url{constructor(a,b,c){super([a,b],c)}};l_Arl=__decorate([l_s(),__metadata("design:paramtypes",[l_4_e,l_6_e,l_CM])],l_Arl);function l_Brl(a,b){if(a&1){const c=l_I();l_Q(0,"div",7);l_T("lucidClick",function(){const d=l_J(c).Da,e=l_U(2);return l_K(e.select(d))});l_Z(1,"lucidPipeValue");l_S(2,"lucid-shape-display-item",8);l_R()}a&2&&(a=b.Da,b=l_U(2),l_V("existing",l__(1,3,b.jAj.pipe(a))),l_M(2),l_P("toolboxDisplayItem",a))}function l_Crl(a){a&1&&(l_Q(0,"div",3)(1,"p",4),l_W(2),l_R(),l_Q(3,"div",5),l_O(4,l_Brl,3,5,"div",6),l_R()());a&2&&(a=l_U(),l_M(2),l_X(a.ba.lpk),l_M(2),l_P("ngForOf",a.items))}
function l_Drl(a){a&1&&(l_Q(0,"div"),l_S(1,"lucid-legend-shapes-tab-zero-state"),l_R())}function l_Erl(a){return l_c(function*(){const b=a.Uf.Bl(245);return 0===a.items.length||!(yield b)})}
var l_Frl=class extends l_g{constructor(a,b){super();this.Osf=a;this.Uf=b;this.items=[];this.nib=[];this.X7a=new l_0;this.TGj=new l_Fc(l_pY.zD,l_pY.zD);this.yIk=new l_Ee(this,c=>({pipe:new l_js(null,()=>l_kzi(c,this.TGj),void 0,l_Zj(l_9yi)),Nk:!0}));this.jAj=new l_Ee(this,c=>({pipe:new l_v(null,()=>this.nib.some(d=>l_Yj(d,this.yIk.value(c),l_9yi)),l_d),Nk:!0}));this.ba={lpk:i18n.get("legend-item-control-shapes-in-use-label")}}ngOnInit(){this.$Oa=l_Erl(this)}select(a){this.X7a.emit(a)}};
l_Frl.qa=function(a){return new (a||l_Frl)(l_L(l_pzi),l_L(l_2m))};
l_Frl.Ja=l_G({type:l_Frl,Ca:[["lucid-legend-shapes-tab"]],inputs:{items:"items",nib:"existingShapeItems"},outputs:{X7a:"itemSelected"},features:[l_N],Ia:4,Ha:5,Ma:[[3,"vertical"],["class","siu-wrapper",4,"ngIf"],[4,"ngIf"],[1,"siu-wrapper"],[1,"siu-label"],[1,"shapes-container"],["class","shape-container",3,"existing","lucidClick",4,"ngFor","ngForOf"],[1,"shape-container",3,"lucidClick"],[3,"toolboxDisplayItem"]],template:function(a,b){a&1&&(l_Q(0,"lucid-scrollable",0),l_O(1,l_Crl,5,2,"div",1),l_O(2,
l_Drl,2,0,"div",2),l_Z(3,"async"),l_R());a&2&&(l_P("vertical",!0),l_M(1),l_P("ngIf",!!b.items.length),l_M(1),l_P("ngIf",l__(3,3,b.$Oa)))},La:[l_qz,l_2,l_5,l_AC,l_Pah,l_xrl,l_xz,l_LB],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;max-width:344px}lucid-scrollable[_ngcontent-%COMP%]{max-height:236px}.siu-wrapper[_ngcontent-%COMP%]{padding:0 16px}.siu-label[_ngcontent-%COMP%]{font-size:12px;line-height:16px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal;margin-top:16px;color:var(--lucid-design-token-secondary-foreground-color-css-var,#6f7681)}.shapes-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:4px}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]{width:40px;height:40px;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:4px;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.shapes-container[_ngcontent-%COMP%]   .shape-container.existing[_ngcontent-%COMP%]{border:1px solid var(--lucid-design-token-foreground-accent-color-css-var,#ced4db);border-radius:4px}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]:hover{background:var(--lucid-design-token-secondary-background-color-css-var,rgba(40,44,51,.08))}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]   lucid-shape-display-item[_ngcontent-%COMP%]{border-radius:4px;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:-webkit-transform .15s ease-in-out;-o-transition:transform .15s ease-in-out;transition:transform .15s ease-in-out;transition:transform .15s ease-in-out,-webkit-transform .15s ease-in-out}.shapes-container[_ngcontent-%COMP%]   .shape-container[_ngcontent-%COMP%]   lucid-shape-display-item[_ngcontent-%COMP%]:hover{-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}"],
changeDetection:0});__decorate([l_5r(),__metadata("design:type",Array)],l_Frl.prototype,"nib",void 0);l_Frl=__decorate([l_Ob,__metadata("design:paramtypes",[l_pzi,l_2m])],l_Frl);function l_Grl(a){a=a.tKi.value;return 0<a.length?(a=a.map(b=>({type:"color",Di:l_pY.Di,value:b})),l_Hzi(a)):l_pY.Kc()}
var l_Hrl=class extends l_g{constructor(a,b,c,d,e,f){super();this.f_e=a;this.uti=b;this.Ra=c;this.Rz=d;this.viewport=e;this.PTa=f;this.tKi=new l_v(this,()=>{const g=[...this.uti.Qa()],h=new Set([...l_kkd(this.f_e,!0)].map(k=>k.serialize()));return g.filter(k=>{k=k.serialize();return h.has(k)?!1:!0})},l_8i(l_fk))}qad(a,b){a=a?l_Grl(this):l_pY.Kc();a.className=l_pY.className;a.BoundingBox=l_cnf(this.viewport,l_pY.Bq,l_pY.Pq);a.DynamicFontSize=this.PTa.tWb;const c=this.viewport.i2.value;c&&(this.Rz.Rs(c,
a,b)||this.Ra.me("Not able to generate the new legend block. Talk to Di Ying or chart1 team to figure this issue out"))}};l_Hrl=__decorate([l_s(),__metadata("design:paramtypes",[l_lkd,l_Arl,l_Sq,l_9K,l_CM,l_lA])],l_Hrl);function l_Irl(a,b){a&1&&(l_Q(0,"lucid-finger-tab",5),l_S(1,"lucid-icon",6),l_Q(2,"span"),l_W(3),l_R()());a&2&&(a=b.Da,l_P("tabName",a.type)("lucidClickIdentifier","legend-item-control-tab-"+a.type),l_M(1),l_P("icon",a.icon),l_M(2),l_X(a.label))}function l_Jrl(a){if(a&1){const b=l_I();l_Q(0,"lucid-basic-color-picker",7);l_T("valueChange",function(c){l_J(b);l_U().I$d.emit({item:{type:"color",Di:l_pY.Di,value:c}});return l_K()});l_R()}a&2&&(a=l_U(),l_P("value",l_Krl(a))("showColorsInUse",!0))}
function l_Lrl(a){if(a&1){const b=l_I();l_Q(0,"lucid-legend-shapes-tab",8);l_T("itemSelected",function(c){l_J(b);const d=l_U();return l_K(l_Mrl(d,c))});l_Z(1,"lucidPipeValue");l_R()}a&2&&(a=l_U(),l_P("items",l__(1,2,a.$Kb.vxd))("existingShapeItems",a.nib))}function l_Krl(a){let b;return"color"!==(null==(b=a.K2b)?void 0:b.type)?l_p:a.K2b.value}
function l_Mrl(a,b){return l_c(function*(){const c=yield l_kzi(b,new l_Fc(l_pY.zD,l_pY.zD)),d={type:"shape",value:b.className};c&&a.I$d.emit({item:c,xx:"from diagram key shape tab",cwa:d})})}
var l_Nrl=class extends l_6z{constructor(a,b,c,d){super();this.SGj=a;this.$Kb=b;this.Osf=c;this.RJg=d;this.nib=[];this.I$d=new l_0;this.l9f=new l_w(this,void 0,l_d);this.YBh=new l_v(this,()=>{let e,f,g;return null!=(g=null!=(f=this.l9f.value)?f:null==(e=this.K2b)?void 0:e.type)?g:"color"},l_d);this.eeg=l_srl}ngOnInit(){if(!this.K2b){var a=this.l9f;var b=this.RJg;try{var c=b.XU.lastUsedTab}catch(d){c="Not able to read DiagramKeyUserStorage['lastUsedTab'].",d instanceof Error&&(c=d.message,d.message=
"Not able to read DiagramKeyUserStorage['lastUsedTab']."),b.Ra.handleError({error:d,severity:"Minor",context:{sourceError:c}}),c=b.$Hg}a.value=c}}pJc(a){Object.values(l_srl).includes(a)&&(this.l9f.setValue(a),this.RJg.XU.lastUsedTab=a)}ngOnDestroy(){super.Mb()}};l_Nrl.qa=function(a){return new (a||l_Nrl)(l_L(l_vrl),l_L(l_k5g),l_L(l_pzi),l_L(l_zrl))};
l_Nrl.Ja=l_G({type:l_Nrl,Ca:[["lucid-legend-item-control"]],inputs:{K2b:"legendItem",nib:"existingShapeItems"},outputs:{I$d:"legendItemChange"},features:[l_N],Ia:7,Ha:11,Ma:[[1,"horizontal",3,"spaceAround","value","noMargin","valueChange"],["class","light no-select-bg horizontal underline-style lucid-finger-tab-hover-animation condensed","data-test-id","'legend-item-control-tab-'+tab.type",3,"tabName","lucidClickIdentifier",4,"ngFor","ngForOf"],[1,"content",3,"ngSwitch"],[3,"value","showColorsInUse",
"valueChange",4,"ngSwitchCase"],[3,"items","existingShapeItems","itemSelected",4,"ngSwitchCase"],["data-test-id","'legend-item-control-tab-'+tab.type",1,"light","no-select-bg","horizontal","underline-style","lucid-finger-tab-hover-animation","condensed",3,"tabName","lucidClickIdentifier"],[3,"icon"],[3,"value","showColorsInUse","valueChange"],[3,"items","existingShapeItems","itemSelected"]],template:function(a,b){a&1&&(l_Q(0,"lucid-inline-finger-tabs",0),l_T("valueChange",function(c){return b.pJc(c)}),
l_Z(1,"lucidPipeValue"),l_O(2,l_Irl,4,4,"lucid-finger-tab",1),l_R(),l_Q(3,"div",2),l_Z(4,"lucidPipeValue"),l_O(5,l_Jrl,1,2,"lucid-basic-color-picker",3),l_O(6,l_Lrl,2,4,"lucid-legend-shapes-tab",4),l_R());a&2&&(l_P("spaceAround",!0)("value",l__(1,7,b.YBh))("noMargin",!0),l_M(2),l_P("ngForOf",b.SGj.tabs),l_M(1),l_P("ngSwitch",l__(4,9,b.YBh)),l_M(2),l_P("ngSwitchCase",b.eeg.color),l_M(1),l_P("ngSwitchCase",b.eeg.shape))},La:[l_qz,l_rz,l_sz,l_1y,l_SU,l_xR,l_gR,l_fC,l_Frl,l_LB],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background:#fff;border-radius:4px;overflow:hidden;min-height:300px}lucid-finger-tab[_ngcontent-%COMP%]{width:56px}lucid-finger-tab[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:56px;margin-top:4px;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;font-size:14px;line-height:20px;font-weight:var(--lucid-theme-normal-font-weight,400);font-style:normal;font-stretch:normal}"],
changeDetection:0});function l_Orl(a,b){a.z2.afb();let c;const d=a.Tt.Xq({Fn:l_Nrl,OI:"left",tq:e=>{e.instance.K2b=b.K2b;e.instance.nib=b.nib;c=e.instance.I$d.subscribe(({item:f,xx:g,cwa:h})=>{b.snk({item:f,xx:g,cwa:h});let k;null==(k=a.$Hb)||k.close()})},Pc:b.YHd,cTb:!0});d&&(a.$Hb=d,a.$Hb.eT.then(()=>{a.$Hb===d&&(a.$Hb=void 0);let e;null==(e=c)||e.unsubscribe()}))}
var l_Prl=class{constructor(a,b,c){this.Tt=a;this.WP=b;this.z2=c}initialize(){this.WP.listen(l_1yi,a=>{l_Orl(this,a)});this.WP.listen(l_4yi.id,()=>{let a;null==(a=this.$Hb)||a.close()})}};l_Prl=__decorate([l_s(),__metadata("design:paramtypes",[l_mo,l_7yi,l_6K])],l_Prl);var l_Qrl=class{};l_Qrl.qa=function(a){return new (a||l_Qrl)};l_Qrl.Xa=l_H({type:l_Qrl});l_Qrl.Wa=l_E({imports:[l_3,l_NB,l_LD,l_ZU,l_BR,l_sC,l_JC,l_fU,l_lH,l_lI,l_NB,l_JC,l_vA]});var l_Rrl=class{};l_Rrl.qa=function(a){return new (a||l_Rrl)};l_Rrl.Xa=l_H({type:l_Rrl});l_Rrl.Wa=l_E({imports:[l_Qrl]});function l_J4(a){let b;return null!=(b=l_zWh(a.deps.selection,l_pY))?b:void 0}var l_K4=class extends l_5M{constructor(a,b,c,d){super(a);this.deps=a;this.J1g=new l_v(this,()=>{{var e=l_J4(this);const f=[];if(e)for(const g of e.PJ.value){const h=l_oY(e,g);f.push(h+e.zD.value/2+e.location.value.y)}e=f}return e},l_d);this.vMb=[b,d,c]}ve(a){return a.ve("c")}};l_K4=__decorate([l_xm(),__metadata("design:paramtypes",[l_3M,l_7zi,l_yFf,l_5zi])],l_K4);var l_Srl=class extends l_K4{constructor(a,b){super(...a);this.CSd=b;this.name="legend-block-add-item";this.ba={dog:i18n.get("legend-block-hint-add-item")};this.xN=this.CH=!0}cursor(a){if(this.Ej(a))return"pointer"}Jo({element:a,Xb:b}){if(a&&l_D.Nb(a)&&this.O0b){if(l_gm(b.ab,this.O0b)&&a instanceof l_pY){const c=l_vzi(a);if(!l_f(c))return!1;l_5yi(this.CSd,a.id,void 0,l_Bzi(a)).then(({item:d,xx:e,cwa:f})=>{l_xzi(a,c,d,e,f)});this.deps.selection.deselectAll();this.deps.selection.Oj(a.id);l_6yi(this.CSd,
new l_lY(a.id,[c]));return!0}return!1}}Yja(a){return this.Ej(a)}Ej({Xb:a,Zp:b}){return b?!!this.O0b&&l_gm(a.ab,this.O0b):!1}uJb(a){const b=a.Kf,c=a.page;a=a.rs;this.O0b=void 0;a=l_wm(a);var d=l_J4(this);if(d&&d.page.value===c&&a===c&&!l_PK(this.rd,d)&&!this.ve(d)){a=d.Aa.value;var e=d.qka.value;d=`renderAddLegendItem,${a.x},${a.y},${a.w},${a.h},${e}`;const k=l_pY.zD*e;var f=2*e,g=6*e;const l=4*e,m=4*e,n=new l_k(l_pY.XT*e,a.h-.4*k);e={size:12*e,lineWidth:0,padding:6*e};var {w:h}=b.measureText([this.ba.dog],
e);const p=new l_r(k/2,0,h,k);h=[];h.push(l_tu(new l_B([new l_A(p.x,p.y),new l_z(p.x+p.w,p.y),new l_z(p.x+p.w,p.y+k),new l_z(p.x,p.y+k),new l_x]),{fillColor:l_zk}),l_tu(new l_B([...l_JQf({x:p.x+p.w-k/2,y:p.y,w:k,h:k},k/2),new l_x]),{strokeColor:l_zk,lineWidth:k/2}),l_tu(new l_B([...l_JQf({x:0,y:0,w:k,h:k},k/2),new l_x]),{strokeColor:l_4k,lineWidth:k/2}),l_tu(new l_B([new l_A(k/2,g),new l_z(k/2,k-g),new l_A(g,k/2),new l_z(k-g,k/2)]),{fillColor:l_o,lineWidth:f,strokeColor:l_o,lineCap:"round",Na:l_o.mc}));
f=new l_r(0,0,p.w+k,p.h);g=l_pl(a.x+n.x,a.y+n.y);b.In({key:d,Nd:h,nb:f,xl:!1,transform:{tg:c.id,Rf:g}});this.O0b=l_r.translate(f,a.x+n.x,a.y+n.y);b.xE({text:this.ba.dog,transform:{tg:c.id,Rf:l_pl(this.O0b.x+k+l,this.O0b.y+m)},options:Object.assign({},e,{Nh:l_Hk,padding:0,fillColor:l_p,pJ:!0})})}}};l_Srl=__decorate([l_s(),__param(0,l_Cm(l_K4)),__metadata("design:paramtypes",[void 0,l_7yi])],l_Srl);var l_Trl=class extends l_K4{constructor(){super(...arguments);this.name="legend-block-drag-handles"}Fh({Kf:a,page:b,zoom:c}){const d=l_J4(this);if(d&&!this.ve(d)){const e=d.Aa.value.x+d.XT.value/2;for(const f of this.J1g.value)l_RM(a,{ab:{x:e,y:f},page:b,icon:l_Mp,scale:c*d.qka.value,Ri:new l_Ga(d.id)})}}ve(a){return super.ve(a)||a.ve("p")}};l_Trl=__decorate([l_s()],l_Trl);function l_Url(a,b,c){const d=c.Aa.value;a:{if(a=l_J4(a))for(e of a.PJ.value){const f=a.Aa.value;let g;const h={x:f.x,y:f.y+l_oY(a,e),h:Math.max(null!=(g=a.uxc.get(e))?g:0,a.zD.value),w:f.w};if(l_gm(b,h)){var e={M3m:e,Oyh:h};break a}}e=void 0}return e?l_gm(b,{x:d.x+d.w-c.XT.value,y:e.Oyh.y,w:c.zD.value,h:e.Oyh.h}):!1}
var l_Vrl=class extends l_K4{constructor(a,b){super(...a);this.CSd=b;this.name="legend-block-delete-row"}Jo(a){const b=l_J4(this);if(b&&l_XK(this.selection,b.id)&&l_Url(this,a.Xb.ab,b)&&!this.ve(b)){this.CSd.dispatchEvent(new l_lY(b.id,[]));{a=a.Xb.ab;const c=l_J4(this);c?(a=c.PJ.value[c.Urc(a)],a=0<=a?a:void 0):a=void 0}a&&l_rrl(b,a);return a?!0:!1}return!1}cursor({element:a,Xb:b}){const c=l_J4(this);if(c&&c.id===(null==a?void 0:a.id))return l_Url(this,b.ab,c)?"pointer":void 0}Fh({Kf:a,page:b,zoom:c}){const d=
l_J4(this);if(d&&!this.ve(d)){const e=d.Aa.value.x+d.Aa.value.w-d.XT.value/2;for(const f of this.J1g.value)l_RM(a,{ab:{x:e,y:f},page:b,icon:l_eq,scale:c*d.qka.value,Ri:new l_Ga(d.id)})}}};l_Vrl=__decorate([l_s(),__param(0,l_Cm(l_K4)),__metadata("design:paramtypes",[void 0,l_7yi])],l_Vrl);function l_Wrl(a,b){const c=l_szi(a,b),d=[];c||d;const e=(l,m)=>{const n=l.x,p=l.y,q=l.h;l=l.w;return new l_B([new l_A(n+l,p+q-m),new l_nu(n+l,p+q,n+l-m,p+q,m),new l_z(n+m,p+q),new l_nu(n,p+q,n,p+q-m,m),new l_z(n,p+m),new l_nu(n,p,n+m,p,m),new l_z(n+l-m,p),new l_nu(n+l,p,n+l,p+m,m),new l_x])},f=(l,m)=>{switch(m){case "color":return new l_B([...l__u(l),new l_x]);case "shape":return e(l,2);default:return new l_B([])}},g=a.location.value.x+a.XT.value,h=a.location.value.y+l_oY(a,b);c&&d.push(l_tu(f({x:g,
y:h,w:a.zD.value,h:a.zD.value},c.type),{fillColor:void 0,lineWidth:2,Hc:!0,strokeColor:l_3k,GXa:!0,strokeStyle:"solid"}));let k;b={x:a.location.value.x+.125*l_pY.XT,y:a.location.value.y+l_oY(a,b),h:Math.max(a.zD.value,null!=(k=a.uxc.get(b))?k:0),w:a.Aa.value.w-.25*l_pY.XT};d.push(l_tu(e(b,4),{fillColor:l_3k.xa(.1)}));return d}function l_Xrl(a,b){const c=[];b.forEach(d=>{(d=l_szi(a,d))&&c.push(d.type.toString())});return c}
var l_Yrl=class extends l_K4{constructor(a,b){super(...a);this.$Zi=b;this.name="legend-row-highlight";this.xN=this.CH=!1}Fh({Kf:a,page:b}){var c=window.devicePixelRatio||1;const d=l_J4(this);if(d){var e,f=null!=(e=this.$Zi.djf.get(d.id))?e:new Set;e=d.PJ.value;const g=l_Xrl(d,f),h=[];f.forEach(l=>{h.push(...l_Wrl(d,l))});const k=d.Aa.value;c=`renderLegendRowHighlight,${k.x},${k.y},${k.w},${k.h},${c},${[...f].join("-")},${e.join("-")},${g.join("-")}`;f=l_i7c(h);a.In({key:c,Nd:h,nb:f,xl:!1,transform:{tg:b.id,
Rf:l_rl}})}}};l_Yrl=__decorate([l_s(),__param(0,l_Cm(l_K4)),__metadata("design:paramtypes",[void 0,l_yrl])],l_Yrl);function l_Zrl(a){const b=new l_5Ec(i18n.get("tool-group-create-diagram-key"),()=>{a.qad.qad(!0,"button from shape panel")},"addNewDiagramKeyUnderShapeInUseButton");l_orl(a.Zd,a.id,[b])}
var l__rl=class extends l_Lsj{constructor(a,b,c,d,e,f,g,h,k,l,m,n,p,q,r,t,u,v,w,x=[],y,z,A){super(a,d,g,v,x);this.ZC=f;this.qad=t;this.Xsf=u;this.uLh=y;this.Ruh=z;this.TNd=A;l_Zrl(this);l_Rm(q,{Df:[l_Nrl],module:l_Rrl});c.xqb();b.xqb();l_lP(h,{className:l_TW.className,aY:k.No()?"shape-change-panel font-picker font-size text-color text-emphasis text-alignment text-list-style item-link lock tridot".split(" "):[],zRa:["font-picker","font-size","text-color"]});e.promise.then(()=>{const B=this;return l_c(function*(){const E=
yield B.$_();E&&B.ZC.uIg.set("chart",E);yield B.qqd()})});l_2Si(A,this.Ga,()=>this.qqd());l_lP(h,{className:l_isj,zRa:["crop-image-fill","image-fill-position","item-link","emoji"]});for(const B of[l,m,n,p])for(const E of B.vMb)E.r5(B);r.initialize();b={action:()=>{this.qad.qad(!1,"selected from insert menu")},Pt:i18n.get("menu-item-add-diagram-key-additional-terms"),id:"add-diagram-key",label:i18n.get("menu-item-add-diagram-key")};l_prl(this.Xsf,{Vva:"insert",item:b});l_nrl(w,l_UFg,l_qrl(this,a.document))}$_(a=
!1){const b=this;return l_c(function*(){const c="T-B"===l_lD(b.uLh.vb,"StampStickyNote",!0),d=c?"DefaultStickyNoteBlock":l_Jsj.className;var e=l_gM(b.Ruh,b.id,d);if(e){e=yield(yield l_sO(b.Ruh,e)).yY();e=l_Sc(e);var f={},g={};if(a&&c){const {ARb:h,NId:k}=l_1Si(b.TNd);if(!h)return;f=l_Kd([l_j.newValue(h.serialize())]);g.color=k.serialize()}return{className:d,Hx:f,tL:e,ir:g,fsi:h=>{c||l_4H(h);b.uLh.rZa()}}}})}qqd(){const a=this;return l_c(function*(){const b=yield a.$_(!0);var c=a.ZC;b?c.sNe.set("chart",
b):c.sNe.delete("chart")})}};l__rl=__decorate([l_s(),__param(3,l_zm(l_Gkc)),__param(4,l_ym(l_bn)),__param(19,l_Am(l_edd)),__metadata("design:paramtypes",[l_bK,l_7Si,l_Bkj,Object,Object,l_7Bf,l_lA,l_mP,l_KD,l_Vrl,l_Trl,l_Srl,l_Yrl,l_Sm,l_Prl,l_Hrl,l_k4f,l_dXe,l_rgc,Array,l_wrl,l_jM,l_3Si])],l__rl);l_cK.set("defaultview",l__rl);
//# sourceURL=/js/application/chart_app/chunk/defaultview.js?compiled=1
